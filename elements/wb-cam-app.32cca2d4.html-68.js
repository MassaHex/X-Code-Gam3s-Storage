define("components/w69b-es6/webrtc-recorder.js",["exports","./log.js","./files-helper.js","./async-response.js","./pausable-timer.js"],function(e,t,r,n,a){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var u=t[a](o),i=u.value}catch(e){return void r(e)}return u.done?void e(i):Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function s(){function e(e){return y=y.then(i(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(e||P>T)&&(r=new Blob(R),R.length=0,P=0,w.send("write",r));case 1:case"end":return t.stop()}},t,this)}))).catch(function(e){c.default.error("webrtcRecoder: flushQueue failed",e)})}function t(t){R.push(t),P+=t.size,e()}function r(e){var r=e.data;t(r)}function n(){if(x.state!=v.state){switch(x.state=v.state,v.state){case"paused":j.pause();break;case"recording":j.paused?j.resume():j.start()}b.onStateChanged&&b.onStateChanged(x.state)}}function o(){x.time=j.time,b.onTimeChanged&&b.onTimeChanged(x.time)}function u(){k.forEach(function(e){v.addEventListener(e,n)})}function s(e,t){v.addEventListener(e,function r(){v.removeEventListener(e,r),t.apply(this,arguments)})}var v,h,w,g,b={},k=["start","stop","pause","resume","error"],x={state:"inactive",time:0},y=Promise.resolve(),T=1e5,S=500,R=[],P=0,j=new a.PausableTriggeringTimer(o,500),M="bower_components/mediarecorder/mediarecorder.worker.min.9a9c6a2a.js";return b.onStateChanged=null,b.onTimeChanged=null,b.start=function(){var e=i(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c.default.debug("webrtcRecorder: onStart",t,n),h=new l,h.addTrack(n.videoTrack),n.audioTrack&&h.addTrack(n.audioTrack),e.prev=4,v=new p(h,{mimeType:n.mimeType||m}),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(4),c.default.error("failed to create MediaRecorder",e.t0),e.t0;case 12:if(!d.default.isSupported()){e.next=15;break}return e.next=15,d.default.removeByPath(t).catch(function(){return null});case 15:return g=new Worker(M),w=f.createSender(function(e){return g.postMessage(e)}),g.addEventListener("message",function(e){return w.handleResult(e.data)}),w.send("init",t),v.addEventListener("dataavailable",r),e.abrupt("return",new Promise(function(e){s("start",function(){c.default.debug("webrtcEncoder: onStart"),e()}),u(),v.start(S)}));case 21:case"end":return e.stop()}},e,this,[[4,8]])}));return function(t,r){return e.apply(this,arguments)}}(),b.pause=function(){return v.pause(),n(),Promise.resolve()},b.resume=function(){return v.resume(),n(),Promise.resolve()},b.getStateObj=function(){return x},b.load=function(){},b.stop=i(regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Promise(function(e){s("stop",function(){e()})}),v.stop(),t.next=4,r;case 4:return j.pause(),t.next=7,e(!0);case 7:return t.next=9,w.sendWithResponse("end");case 9:return n=t.sent,g.terminate(),g=null,w=null,j.reset(),t.abrupt("return",n);case 15:case"end":return t.stop()}},t,this)})),b}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=u(t),d=u(r),f=o(n),p=window.MediaRecorder,l=window.webkitMediaStream||window.MediaStream,m='video/webm; codecs="vp8, opus"';s.isSupported=function(e){function t(){var e=navigator.userAgent,t=e.match(/Firefox\/(\d+)/);return t&&t[1]>=44&&e.indexOf("Android")<0}return"undefined"!=typeof p&&(p.isTypeSupported&&p.isTypeSupported(e||m)||t())},e.default=s});
//# sourceURL=https://www.cam-recorder.com/elements/wb-cam-app.32cca2d4.html-68.js
