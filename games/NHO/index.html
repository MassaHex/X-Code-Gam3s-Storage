<!DOCTYPE html>
<html style="margin: 0; overflow: hidden; background-color: #2e3440;">
  <head>
    <title>Classlink</title>
	<script>
      window.onload = function() {
        var cookieValue = document.cookie
          .split(';')
          .map(cookie => cookie.trim())
          .find(cookie => cookie.startsWith('password='));
        if (cookieValue && cookieValue.split('=')[1] === 'correct') {
          // Password cookie is present and correct, do nothing
        } else {
          // Password cookie is not present or incorrect, redirect to root
          window.location.href = '/';
        }
      };
    </script>
	<script>
      // Listen for beforeunload event on any iframe on the page
      window.addEventListener("beforeunload", function(event) {
        // Get all iframes on the page
        var iframes = document.querySelectorAll("iframe");
        // Loop through all iframes and intercept their requests
        for (var i = 0; i < iframes.length; i++) {
          // Check if the iframe's source is different from the parent page's origin
          if (iframes[i].contentWindow.location.origin != window.location.origin) {
            // Cancel the unload event to prevent the iframe from navigating away
            event.preventDefault();
            // Create a new iframe that loads the requested site in an about:blank page
            var newIframe = document.createElement("iframe");
            newIframe.src = "about:blank";
            newIframe.style.width = "100%";
            newIframe.style.height = "100%";
            // When the new iframe is done loading, load the requested site inside it
            newIframe.onload = function() {
              var requestedSite = iframes[i].contentWindow.location.href;
              var iframeInsideNewIframe = newIframe.contentWindow.document.createElement("iframe");
              iframeInsideNewIframe.src = requestedSite;
              iframeInsideNewIframe.style.width = "100%";
              iframeInsideNewIframe.style.height = "100%";
              newIframe.contentWindow.document.body.appendChild(iframeInsideNewIframe);
            };
            // Replace the original iframe with the new iframe
            iframes[i].parentNode.replaceChild(newIframe, iframes[i]);
          }
        }
      });
	</script>
  </head>
  <body style="overflow: hidden; margin: 0;">
    <iframe id="myFrame" referrerPolicy="no-referrer" onerror="handleError()" src="https://htestip.com/" style="overflow: hidden; border: none; width: 100%; height: 100%;"></iframe>
    <script>
      function resizeFrame() {
        var frame = document.getElementById("myFrame");
        frame.style.height = window.innerHeight + "px";
        frame.style.width = window.innerWidth + "px";
      }
      window.onresize = resizeFrame;
      resizeFrame();
    </script>
    <script>
      function handleError() {
        var frame = document.getElementById("myFrame");
        frame.src = "error.html";
      }
    </script>
  </body>
</html>